generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model SyncState {
  id                String    @id @default(cuid())
  type              String
  objectType        String?
  object            String?
  entityId          String?
  maxLastModifiedAt DateTime?

  @@unique([type, objectType, object])
  @@unique([type, entityId])
  @@map("sync_states")
}

model Opportunity {
  id             String   @id @default(cuid())
  providerName   String
  customerId     String
  originalId     String
  name           String?
  amount         Int?
  lastModifiedAt DateTime

  @@unique([providerName, customerId, originalId])
  @@map("opportunities")
}

model SupaglueHubSpotDeal {
  supaglue_application_id   String   @map("_supaglue_application_id")
  supaglue_provider_name    String   @map("_supaglue_provider_name")
  supaglue_customer_id      String   @map("_supaglue_customer_id")
  supaglue_id               String   @map("_supaglue_id")
  supaglue_emitted_at       DateTime @map("_supaglue_emitted_at")
  supaglue_last_modified_at DateTime @map("_supaglue_last_modified_at")
  supaglue_is_deleted       Boolean  @map("_supaglue_is_deleted")
  supaglue_raw_data         Json     @map("_supaglue_raw_data")
  supaglue_mapped_data      Json     @map("_supaglue_mapped_data")

  @@id([supaglue_application_id, supaglue_provider_name, supaglue_customer_id, supaglue_id])
  @@map("hubspot_deal")
}
